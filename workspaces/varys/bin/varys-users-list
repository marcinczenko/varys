#!/bin/sh
':' //# http://sambal.org/?p=1014 ; exec /usr/bin/env node -r esm "$0" "$@"

'use strict'

import program from 'commander'

import pkg from '../package.json'

import { listUsers } from '../lib/commands'
import { infoMessage } from '../lib/logger'
import { defaultConfiguration } from '../lib/config'

program
  .version(pkg.version)
  .description(pkg.description)
  .option('-l, --ldap', 'check ldap')
  .arguments('[organizations...]')
  .action(function (organizations, options) {
    infoMessage('list users')
    listUsers(defaultConfiguration, organizations, options)
  })
  .parse(process.argv)
